# 取り組んだ課題

- React TODO List
    - リファクタリング
- Webセキュリティ

# わかったこと

- トークン (idToken, accessToken) をCookieに保存する時に考慮すべき事は？
    - `HttpOnlyフラグ`の使用
        - JSからのアクセスを防ぎ、XSS攻撃のリスク対策
            - `XSS`とは？
        - しかし、DOM操作やXMLHttpRequestは、JS側からできるので、秘密情報の盗み出しやなりすましは可能
    - `Secureフラグ`の使用
        - HTTPS接続でのみCookieが送信されるようにする
    - `SameSite属性`の設定
    - ただ、
- `リフレッシュトークン`とは？どういった時に使う？
    - ユーザーが認証されるとCognitoが3種のトークンを発行 (idToken, accessToken, refreshToken) の一つ
        - idトークンは、ユーザー情報を含み、主にクライアントサイドで使用
        - アクセストークンは、APIリクエスト時に使用
    - トークンの更新
        - アクセストークンが期限切れになると、clientがリフレッシュトークンを使用して、新しいIDトークンとアクセストークンを発行
        - この時のユーザー認証は不要
- jwtの検証方法
    - 最近だとフロントエンドで行うのがベストプラクティス？ (NextAuthとか？)
    - `暗号鍵`を使って、`ヘッダー`と`ペイロード`を署名 (暗号化) → `シグニチャ`
        - ヘッダーとペイロードは、base64デコードすることで、簡単に中身を見ることができる
    - 公開鍵方式
        - シグニチャを作成する側は、そのユーザーの秘密鍵で署名 (暗号化) する
        - jwtを受け取る側は、秘密鍵に対する公開鍵でシグニチャ(署名) を検証 (複合化してヘッダー・ペイロードと比較) する
    - 検証項目
        - 署名
        - トークンの有効期限
        - 発行者 (iss) の確認
        - 対象者 (aud) の確認

# 次やること

- Webセキュリティ

# 感じたこと

- 業務でjwtの検証、認証・認可、セキュリティについて相談する機会があったので、ざっくりわからない事などを書き出せてスッキリした

# 学習時間

3h